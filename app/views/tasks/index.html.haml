:javascript
 $(document).ready( function() {
 var oTable = $('#taskTable').dataTable();
 $('#addNewButton').click(function() {
  fnClickAddRow();
  })


 oTable.$('td').editable(function(value, settings) {

    var aPos = oTable.fnGetPosition( this );
    var name = $('#taskTable thead tr th:eq(' + aPos[1] + ')').attr('id');
    console.log(name);

    var className = this.getAttribute('class');
    console.log(className);

   var data = {};
   data[name] = value;

   var testdata = {task : data};
   id = this.parentNode.getAttribute('id');
   $.ajax({
   type: 'PUT',
   url: 'tasks/' + id + '.json',
   data : testdata,
   });


            return(value);
    }, {
             indicator : 'Saving...',
             tooltip   : 'Click to edit...',
        "height": "14px",
        "width": "100%"

      });



 });

 function fnClickAddRow() {

    var d = new Date().toISOString();

 $('#taskTable').dataTable().fnAddData( [


 "foobar", "", d, 8, "working from javascript", "admin", "foo@bar.com", "", "", "" ]);



  var testdata = {task : {"project_name" : "foobar", "hours" : 8, "notes" : "working from javascript", "performed_on": d}}

  $.ajax({
  type: 'POST',
  url: 'tasks.json',
  data : testdata,
  });

   //$('#taskTable').dataTable().fnReloadAjax();

  }




.page-header
 %h1 #{@user.name}'s Completed Tasks


.row.span12
 %button.btn.btn-primary#addNewButton Add New Task

.row.span12

 %table.table.table-striped.table-bordered.table-condensed#taskTable
  %thead
   %tr
    %th{:id=>"project_name"} Project name
    %th{:id=>"task_name"} Task name
    %th{:id=>"performed_on"} Completed on
    %th{:id=>"hours"} Hours
    %th{:id=>"notes"} Notes
    %th
  %tbody
   - @tasks.each do |task|
    %tr{:id=>task.id}
     %td= task.project_name
     %td= task.task_name
     %td= task.performed_on
     %td= task.hours
     %td= task.notes
     %td= link_to 'Delete', task, confirm: 'Are you sure?', method: :delete


.result
